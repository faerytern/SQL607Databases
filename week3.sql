DROP TABLE EMPLOYEE;
DROP TABLE DEPARTMENT;
DROP TABLE PROJECT;
DROP TABLE WORKSON;
--Normally you should create tables in the order of key hierarchy - make what doesnt need any keys first, then add others that depend on it.
--Otherwise, you could create the tables without relationships, and then use ALTER TABLE queries after to set up the relationships.

CREATE TABLE DEPARTMENT (
DeptNo CHAR(4) PRIMARY KEY NOT NULL,
DeptName VARCHAR(25) NOT NULL,
DeptLocation VARCHAR(30) NULL);
INSERT INTO DEPARTMENT VALUES ('d1', 'research','Dallas');
INSERT INTO DEPARTMENT VALUES ('d2', 'accounting','Seattle');
INSERT INTO DEPARTMENT VALUES ('d3', 'marketing','Dallas');
SELECT * FROM DEPARTMENT;

CREATE TABLE EMPLOYEE (
  EmpNo INTEGER PRIMARY KEY NOT NULL, 
  EmpFirstName CHAR(20) NOT NULL,
  EmpLastName CHAR(20) NOT NULL,
  DeptNo CHAR(4) NULL FOREIGN KEY (DeptNo) REFERENCES DEPARTMENT(DeptNo));

INSERT INTO EMPLOYEE VALUES(25348, 'Matthew', 'Smith'    ,'d3');
INSERT INTO EMPLOYEE VALUES(10102, 'Ann'    , 'Jones'    ,'d3');
INSERT INTO EMPLOYEE VALUES(18316, 'John'   , 'Barrimore','d1');
INSERT INTO EMPLOYEE VALUES(29346, 'James'  , 'James'    ,'d2');
INSERT INTO EMPLOYEE VALUES( 9031, 'Elsa'   , 'Bertoni'  ,'d2');
INSERT INTO EMPLOYEE VALUES( 2581, 'Elke'   , 'Hansel'   ,'d2');
INSERT INTO EMPLOYEE VALUES(28559, 'Sybill' , 'Moser'    ,'d1');
SELECT * FROM EMPLOYEE;
SELECT EmpNo, EmpFirstName, EmpLastName
  FROM EMPLOYEE WHERE DeptNo = 'd2'
  ORDER BY EmpNo;

SELECT * FROM EMPLOYEE ORDER BY deptno;



CREATE TABLE PROJECT (
  ProjNo CHAR(4) PRIMARY KEY NOT NULL,
  ProjName VARCHAR(15) NOT NULL,
  ProjBudget DECIMAL(12,2) NULL);
INSERT INTO PROJECT VALUES ('p1', 'Apollo', 120000.00);
INSERT INTO PROJECT VALUES ('p2', 'Gemini', 95000.00);
INSERT INTO PROJECT VALUES ('p3', 'Mercury', 186500.00);
SELECT * FROM PROJECT;

CREATE TABLE WORKSON (
  EmpNo INTEGER FOREIGN KEY (EmpNo) REFERENCES EMPLOYEE(EmpNo) ON DELETE SET NULL,
  ProjNo CHAR(4) NOT NULL FOREIGN KEY (ProjNo) REFERENCES PROJECT(ProjNo) ON DELETE CASCADE,
  WonJob VARCHAR (15) NULL,
  WonEnterDate DATE NULL);
INSERT INTO WORKSON VALUES (10102,'p1','analyst','2006.10.1');
INSERT INTO WORKSON VALUES (10102,'p3','manager','2008.01.1');
--SELECT * FROM WORKSON;

INSERT INTO DEPARTMENT VALUES ('d1', 'research','Dallas');
INSERT INTO DEPARTMENT VALUES ('d2', 'accounting', 'Seattle');
INSERT INTO DEPARTMENT VALUES ('d3', 'marketing', 'Dallas');

INSERT INTO PROJECT VALUES ('p1', 'Apollo', 120000.00);
INSERT INTO PROJECT VALUES ('p2', 'Gemini', 95000.00);
INSERT INTO PROJECT VALUES ('p3', 'Mercury', 186500.00);

INSERT INTO WORKSON VALUES (10102,'p1', 'analyst', '2006.10.1');
INSERT INTO WORKSON VALUES (10102, 'p3', 'manager', '2008.1.1');
INSERT INTO WORKSON VALUES (25348, 'p2', 'clerk', '2007.2.15');
INSERT INTO WORKSON VALUES (18316, 'p2', NULL, '2007.6.1');
INSERT INTO WORKSON VALUES (29346, 'p2', NULL, '2006.12.15');
INSERT INTO WORKSON VALUES (2581, 'p3', 'analyst', '2007.10.15');
INSERT INTO WORKSON VALUES (9031, 'p1', 'manager', '2007.4.15');
INSERT INTO WORKSON VALUES (28559, 'p1', NULL, '2007.8.1');
INSERT INTO WORKSON VALUES (28559, 'p2', 'clerk', '2008.2.1');
INSERT INTO WORKSON VALUES (9031, 'p3', 'clerk', '2006.11.15'); 
INSERT INTO WORKSON VALUES (29346, 'p1','clerk', '2007.1.4');
SELECT * FROM WORKSON;
